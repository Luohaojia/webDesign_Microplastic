<template>
  <!-- å…·å¤‡ä¸€ä¸ªå®½é«˜çš„dom -->
  <div ref="main" class="echartBox" style="margin: 0 auto; padding: 0; overflow: hidden"></div>
</template>

<script>
// å¯¼å…¥echarts
import * as echarts from 'echarts'
// ä¸­å›½åœ°å›¾
import chianJson from '@/../public/static/map/china.json'
// å¯¼å…¥echartsä¸»é¢˜
require('@/theme/chalk')
export default {
  name: 'china-map',
  data() {
    return {
      chart: ''
    }
  },
  mounted() {
    this.$nextTick(() => {
      this.initChart()
      window.addEventListener('resize', this.screenAdapter)
      this.screenAdapter()
    })
  },
  methods: {
    initChart() {
      // initç¬¬ä¸€ä¸ªå‚æ•° refå®šä¹‰çš„ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸»é¢˜
      this.chart = echarts.init(this.$refs.main)
      echarts.registerMap('china', chianJson)
      this.chart.setOption({
        title: {
          // text: 'ï¼ˆç§»åŠ¨é¼ æ ‡å¯æŸ¥çœ‹39ä¸ªåŸå¸‚åˆ†å¸ƒï¼‰',
          left: 'center',
          // top: 20,
          textStyle: {
            color: 'rgb(152, 149, 149)',
            // fontStyle: 'normal',
            fontWeight: 'normal',
            fontSize: 2,
            fontFamily: 'HeiTi'
          }
        },
        geo: {
          type: 'map', // ç±»å‹
          map: 'chain',
          top: '25%', // è·ç¦»é¡¶éƒ¨
          // bottom: '5%', // è·ç¦»åº•éƒ¨
          itemStyle: {
            // åœ°å›¾åŒºåŸŸçš„æ ·å¼ã€‚
            areaColor: 'rgb( 190, 220, 240)', // åœ°å›¾æ•´ä½“åŒºåŸŸçš„é¢œè‰²
            borderColor: '#FFF', //åœ°å›¾è¾¹ç•Œçº¿çš„é¢œè‰²
            // emphasis: {
            //   areaColor: 'rgb( 160, 190, 230)' //é¼ æ ‡æ‚¬åœæ—¶åŒºåŸŸå˜æˆçš„é¢œè‰²
            // },
            label: {
              emphasis: {
                //é¼ æ ‡ç§»å…¥æ—¶æ˜¾ç¤ºçš„é»˜è®¤æ ·å¼,ä¹Ÿå°±æ˜¯é¼ æ ‡ç§»ä¸Šå»ï¼Œæ˜¾ç¤ºè¯¥åœ°åŒºçš„åœ°åï¼Œå¯å…·ä½“è®¾ç½®æ ·å¼ï¼Œä¹Ÿå¯ä¸æ˜¾ç¤º
                show: false
              }
            }
          },
          emphasis: {
            itemStyle: {
              areaColor: 'rgb( 160, 190, 230)' //é¼ æ ‡æ‚¬åœæ—¶åŒºåŸŸå˜æˆçš„é¢œè‰²
            }
          },
          tooltip: {},
          zoom: 1.3
        },
        // è‡ªå®šä¹‰æç¤ºæ¡†çš„å†…å®¹
        tooltip: {
          trigger: 'item',
          show: true,
          // è‡ªå®šä¹‰æç¤ºæ¡†çš„å†…å®¹
          formatter(params) {
            return '<div>ğŸš©' + params.data.name + '</div>'
          }
        },
        // æ•£ç‚¹å›¾
        series: [
          {
            type: 'effectScatter', //ç‰¹æ•ˆæ•£ç‚¹å›¾
            rippleEffect: {
              // æ¶Ÿæ¼ªæ•ˆæœ
              scale: 3.5, //æ¶Ÿæ¼ªç‰¹æ•ˆåŠ¨ç”»ä¸­æ³¢çº¹çš„æœ€å¤§ç¼©æ”¾æ¯”ä¾‹
              brushType: 'stroke'
            },
            coordinateSystem: 'geo', // ä½¿ç”¨åæ ‡,
            itemStyle: {
              color: 'rgb( 250, 230, 230 )'
            },
            // name: 'ä¸€çº¿åŸå¸‚',
            data: [
              { name: 'åŒ—äº¬', value: [116.46, 39.92] },
              { name: 'å¤©æ´¥', value: [117.30983, 39.71755] },
              { name: 'çŸ³å®¶å·', value: [117.48149137695314, 39.065911534473464] },
              { name: 'å¤ªåŸ', value: [112.48699, 37.94036] },
              { name: 'å‘¼å’Œæµ©ç‰¹', value: [111.62299, 40.80772] },
              { name: 'é•¿æ˜¥', value: [125.28845, 43.83327] },
              { name: 'å¤§è¿', value: [121.5255, 38.95223] },
              { name: 'æ²ˆé˜³', value: [123.46987, 41.80515] },
              { name: 'å“ˆå°”æ»¨', value: [126.95717, 45.54774] },
              { name: 'ä¸Šæµ·', value: [121.48941, 31.40527] },
              { name: 'å—äº¬', value: [118.8921, 31.32751] },
              { name: 'å®æ³¢', value: [121.84431, 29.89889] },
              { name: 'æ­å·', value: [120.21201, 30.2084] },
              { name: 'åˆè‚¥', value: [117.30794, 31.79322] },
              { name: 'ç¦å·', value: [119.27345, 26.04769] },
              { name: 'å¦é—¨', value: [118.03394, 24.48405] },
              { name: 'å—æ˜Œ', value: [115.94422, 28.54538] },
              { name: 'é’å²›', value: [120.39629, 36.30744] },
              { name: 'æµå—', value: [116.75199, 36.55358] },
              { name: 'éƒ‘å·', value: [113.6401, 34.72468] },
              { name: 'æ­¦æ±‰', value: [114.02919, 30.58203] },
              { name: 'é•¿æ²™', value: [112.98626, 28.25591] },
              { name: 'æ·±åœ³', value: [113.88308, 22.55329] },
              { name: 'å¹¿å·', value: [113.27324, 23.15792] },
              { name: 'å—å®', value: [108.27331, 22.78121] },
              { name: 'æµ·å£', value: [110.32941, 20.02971] },
              { name: 'é‡åº†', value: [106.54041, 29.40268] },
              { name: 'æˆéƒ½', value: [104.101947, 30.65984] },
              { name: 'è´µé˜³', value: [106.62298, 26.67865] },
              { name: 'æ˜†æ˜', value: [102.82147, 24.88554] },
              { name: 'æ‹‰è¨', value: [91.13775, 29.65262] },
              { name: 'è¥¿å®‰', value: [108.93425, 34.23053] },
              { name: 'å…°å·', value: [103.71878, 36.10396] },
              { name: 'æ–°å®', value: [110.85674, 26.43346] },
              { name: 'é“¶ç¯', value: [110.85674, 26.43346] },
              { name: 'ä¹Œé²æœ¨é½', value: [88.31104, 43.36378] },
              { name: 'é¦™æ¸¯', value: [114.16546, 22.27534] },
              { name: 'æ¾³é—¨', value: [113.54913, 22.19875] },
              { name: 'å°åŒ—', value: [121.520076, 25.030724] }
            ]
          }
        ]
      })
    },
    // å½“æµè§ˆå™¨çš„å¤§å°å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨æ­¤æ–¹æ³•æ¥å®Œæˆé€‚é…
    screenAdapter() {
      // è·å–è‡ªé€‚åº”å¤§å°
      const titleFontSize = (this.$refs.main.offsetWidth / 100) * 3.6
      // è‡ªé€‚åº”é…ç½®
      const adapterOption = {
        title: {
          textStyle: {
            fontSize: titleFontSize // è‡ªé€‚åº”å­—ä½“å¤§å°
          }
        },
        legend: {
          // å›¾ä¾‹ç»„ä»¶
          itemWidth: titleFontSize / 2,
          itemHeight: titleFontSize / 2,
          itemGap: titleFontSize / 2,
          textStyle: {
            fontSize: titleFontSize / 2 // è‡ªé€‚åº”å­—ä½“å¤§å°
          }
        }
      }
      this.chart.setOption(adapterOption)
      // è‡ªé€‚åº”
      this.chart.resize()
    }
  }
}
</script>

<style lang="scss" scoped>
.echartBox {
  height: 700px;
  width: 100%;
  margin: 0 auto;
}
</style>
